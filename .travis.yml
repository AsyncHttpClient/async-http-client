dist: xenial
language: minimal
sudo: true
services:
- docker
env:
  global:
  - SERVICE_NAME=async-http-client
  - REVISION=$(git rev-parse --short ${TRAVIS_COMMIT})
  - secure: R2rTEfMHG3CHfbFBiSin6QI7hOm97DAIRz5bX0/My/jSuxGxblTbw3XntqFhByjbCgoWQn9crUQ1bdTp8RRmNC4/bbsdaPsXhD9jKnL/aJ+bNkEuh2/akyGnKvH300c2ZyGm5q5eC5FA20ErX5c3+86Sy821ywa/iC11YaV5XzP6lyxuFTJWs3e7SK7kbL4seyNd2sD/8DYzEeCwKxpCI8bVz7ZQUazP2IpkIjcS9SBeLwPHKbS1f2je8b6XIOkQUvJzxs3jrWIH9HwakA8/M/CSFo+GUkkRtPDj3V+lg1IyOA3VPLMxAVqeoryLIS6ITR8Zti+MDrodLM0llwo2dQ3ZI1RYzYieGcAg0XCflcH0fmrJd1gPiCuYKSmL48mAvgUkCThNU8nFekaqLLsspv7pS7+Ozi7f/j1pq8j4PkV2TV8HUa9RBcOepdeQnKxuFxc55NXfGvDPvqf9jw6CGxWqtFwRQg42gZtVWILgTvhmPchaIj0TKGYnnxG1jXXK0CQcMGOhF/T7WMrfZ1ZPVkT3/GUvh+PC7m2DE+dXonM1Ebo0p3lgWYlrlGv7fgjcrdHYi7FvqG0lZtUuNphGeoU7+QYOwZ0o7p7tboK24YW0dv7jybiCIzOloAfGgX+YflRZY9WpYJWMa0C9LaXok64oRT4/Fu0TEABHltc+TaY=
  - secure: YK54XEeT5p/vCRG56GigVYAPVOEbqvHvltitS8JuhKw0jomYeB6FZf8N6ELZcbJh3pclwa9irihCGUxEbUKYaepQLBuns+c+EFKeEApFRdCUaZ/psKtg1A5gx+5MB4Qz5/ZA/CdyDYe3Muf0OAgkzfZxG9ayPtdanaOVCHyrY8jJDRCkgWqqOhnD1pw9MxhQpBUdtbOhdzb+F/mZ0P3be6+49BuFHcaPR3Ppw+3sUSy7ABoAWebjSk//FruEAPUel2WbivHo4GzJZydy4RqQG0YYkif2cz2h9I84uxLwXyl27dKd7oUvUtLaE1oQpYshoDGlCiO4VWUNDdMrrf3eBzkJ0QqF/wNF9CyYN1WIigK+gJ8vusPqB3V3f90RMdw6Q8vSLin0hcVpCTmDNXKlYmRJ5qzqWoyn7kX0vW4qCwCxiaL+iJg+Lu1ftIoWOY5oFmR6hkQjsIxrUqrTa2DA/SFU2Sde9E3Kx0q7l7BGJEcscmmyjrCJfFFaZX3jjY2So+xjgr0ymVO5KTG6PV8PZavsOG9TEXs8dl/9Bw8aup4rna8zixqp0nPJbQR9fLS9oub4eUpOIjl8fM3mbC7gAxr6zvQJ8yUdsBpjGiRHIWRzY2bAIDDSyqVo6uwlkeIlbXAakEgBFt6gcALvlOPV3YW6+rHps0hq6s4YYYXdhrE=
  - secure: Ay+VkQA2gipR88zavvQ28IdrUFv5MQ9HSnIUxbt3iqjc1Qx2rmpRvC44L07LoU3gYzxeu5iyzp5qVjKgcuGeqTKZCJDCUI/iX0LyJZoZoZSnMRdNLblVie/Wt7kTn/jax5vdDR40+DJLDYBrTl9t+/Maut++gEJfeqbjYcIrS1GRC4XtQfgADu6yV5X4FwjaGRu6Ws6U3OAl4Obh9IsfGiB7ildpVGryXj2B348dneANCDT1JUpeWNJtGszr3HKSqgJFhAmDWYSoHluPZhMd1XofS18rNM3/YCQ+p078o4GGml9QPYAt5voMiJXYvOZl1FEehPPdDbEV0rpc12BLK8cq2a4uxWLYfE7SmQODHU2MtsBvqCNp7jEk4K00ub+B27Y4i45MSP6qWf4pZaACjg2RIDbGMIrSfZpxRodYFO6QgwobxS6kPrJQzBJJPjk82MIkvzxG1sw4BxAJBy+IctUlwLdeopXM+rUpjvfGy4Bv9QNHbma+3DA8SIL/hvHsdnKiFxVGgh7tdoWDSpKqENZptWUcPMx5OsnDT8cv4TcMiEVX5+Ya+rQYUB9qVfG34QOSnTCaCGrUIarfMSWNnFhNWDv6AqTPF3rlLxASPJ17OOnD0VMm+IfGLE6Kv7MBi99dXAqHHu1OgLbJhzCA3Wqtflkv8hZzn9CpANJbMgI=
  - secure: eFF6Eyz3nluIT0nW0Dx0cCY5ho88CNZyxv8hXUUSTzuyDSfAIaPPIyTjgCNcoMxLWjEyR1NuNywcWUv50tJBeTv8U5jJSkP4SmZtMIqoFGEobOUuQ06eHPtdMhxZSjmgWbnET45AAG+lUBIwfWndItukaxGMOtuS6Lv4pjCNZeLXhLEJPeJ6OEsE1ZerqZojAFlv0Jge7D8RyVdx1pfHec85vBbpS9kfM/McntHRVDJuVsKjvIE1ExzL3L/wK4ouJxdC20rYdZv6q6zTEjbAVZWn3kDJy7jL+warL1eTv/YZda1+1TVSKFwZNgjmtV2CLIdpSlJIGmP4N3Svp/2wF+vMCEhOHB/KgiaPjefcjPT0CUOAEExoXaF2mccZysPazk8qvoQ3DU7o6BuXu/sIC5o/5qYzhlm/Ir/3xgWHsM5m7hTyol+emtt1Nhh+EGpAORIAfb6+g2acqYfgp4HsR14VPblYwd33PG3hF3aGqa5eKhX9lwYNZr98S6VyVu/1vRNyBpes8lcaVCKzQd6s5urmHQQge8HKESuJdNuLBn2m4F8/6TWgTwxywiMKezOwRVnKciJffMqkoXXmwuPEt+aHJyQp6e7zlo0pFxohNCiyxr/9Us6tXrXX6sIFVOc9uwBDYr53pRA5n3tUrJDeuLWCIGSQdB7G2ZUkI3+jtOI=
cache:
  directories:
  - build-cache
install:
- docker-compose -f docker-compose.yml build
script:
- docker-compose -f docker-compose.yml run ${SERVICE_NAME}
before_cache:
- docker-compose -f docker-compose.yml run --rm -v `pwd`/build-cache:/app/build-cache
  ${SERVICE_NAME} bash docker-utils.sh save-cache
